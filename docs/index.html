<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بازار ارزوئیه</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Vazirmatn', sans-serif;
      background-color: #f0f0f5;
      margin: 0;
      padding: 0;
      direction: rtl;
    }
    header {
      background: linear-gradient(90deg, #ff5f6d, #ffc371);
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 24px;
      position: relative;
    }
    .datetime-box {
      position: absolute;
      left: 15px;
      top: 15px;
      background-color: white;
      color: black;
      padding: 5px 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      font-size: 14px;
    }
    .container {
      padding: 20px;
    }
    input, textarea, button, select {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: inherit;
    }
    .row {
      display: flex;
      gap: 10px;
    }
    .row > * {
      flex: 1;
    }
    .shadow {
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .upload-icon {
      border: 2px dashed #aaa;
      text-align: center;
      padding: 20px;
      cursor: pointer;
      background-color: white;
    }
    #preview img {
      max-width: 100%;
      margin: 10px auto;
      display: block;
      border-radius: 8px;
    }
    .nav {
      position: fixed;
      right: -100%;
      top: 0;
      width: 80%;
      height: 100%;
      background: white;
      box-shadow: -2px 0 10px rgba(0,0,0,0.2);
      transition: 0.3s;
      padding: 20px;
      z-index: 1000;
    }
    .nav.open {
      right: 0;
    }
    .nav a {
      display: block;
      margin: 15px 0;
      color: #333;
      font-size: 18px;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <header>
    <div class="datetime-box" id="datetime">در حال بارگذاری...</div>
    بازار ارزوئیه
  </header>
  <div class="container" ontouchstart="openNav()">
    <input type="text" id="title" placeholder="نام محصول">
    <input type="text" id="price" placeholder="قیمت">
    <input type="text" id="seller" placeholder="نام فروشنده">
    <input type="text" id="contact" placeholder="تماس با فروشنده">
    <input type="text" id="address" placeholder="آدرس">

    <div class="upload-icon" onclick="document.getElementById('images').click()">
      آپلود تصاویر
    </div>
    <input type="file" id="images" accept="image/*" multiple style="display:none">
    <div id="preview"></div>

    <textarea id="description" placeholder="توضیحات محصول"></textarea>

    <div class="row">
      <button onclick="shareWhatsApp()">اشتراک‌گذاری در واتساپ</button>
      <button onclick="saveToSheet()">ذخیره</button>
      <button onclick="reserveProduct()">رزرو</button>
    </div>

    <div>
      <label>فرم رزرو:</label>
      <input type="text" id="buyerName" placeholder="نام خریدار">
      <input type="text" id="buyerPhone" placeholder="شماره تماس">
      <input type="text" id="buyerAddress" placeholder="آدرس">
    </div>
  </div>

  <div class="nav" id="nav">
    <a href="#">اشتراک‌گذاری</a>
    <a href="#">درباره ما</a>
    <a href="#">تماس با ما</a>
  </div>

  <script>
    function openNav() {
      document.getElementById('nav').classList.add('open');
    }

    document.body.addEventListener('touchstart', function(e) {
      if (e.touches[0].clientX < 50) {
        openNav();
      }
    });

    function updateDateTime() {
      const now = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      const time = now.toLocaleTimeString('fa-IR');
      const date = now.toLocaleDateString('fa-IR', options);
      document.getElementById('datetime').textContent = `${date} - ${time}`;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();

    document.getElementById('images').addEventListener('change', function(event) {
      const files = event.target.files;
      const preview = document.getElementById('preview');
      preview.innerHTML = '';
      for (let i = 0; i < Math.min(files.length, 5); i++) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const img = document.createElement('img');
          img.src = e.target.result;
          preview.appendChild(img);
        };
        reader.readAsDataURL(files[i]);
      }
    });

    function shareWhatsApp() {
      const title = document.getElementById('title').value;
      const price = document.getElementById('price').value;
      const seller = document.getElementById('seller').value;
      const contact = document.getElementById('contact').value;
      const address = document.getElementById('address').value;
      const description = document.getElementById('description').value;
      const jsonText = `نام ${title}\nقیمت ${price}\nفروشنده ${seller}\nتماس ${contact}\nآدرس ${address}\nتوضیحات ${description}`;
      const url = `https://wa.me/989136666552?text=${encodeURIComponent(jsonText)}`;
      window.open(url, '_blank');
    }

    function saveToSheet() {
      alert("ذخیره‌سازی اطلاعات در Google Sheets در نسخه بعدی افزوده خواهد شد.");
    }

    function reserveProduct() {
      const name = document.getElementById('buyerName').value;
      const phone = document.getElementById('buyerPhone').value;
      const address = document.getElementById('buyerAddress').value;
      alert(`رزرو ثبت شد برای ${name}`);
    }
  </script>
</body>
</html>
