<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø§Ø²Ø§Ø± Ø§Ø±Ø²ÙˆØ¦ÛŒÙ‡</title>
  <style>
    /* --- ÙÙˆÙ†Øª Ùˆ Ù¾Ø§ÛŒÙ‡ --- */
    @font-face {
      font-family: "Vazir";
      src: url("https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/Vazir.woff2") format("woff2");
    }
    body {
      margin: 0;
      font-family: "Vazir", sans-serif;
      background: #f5f9fc;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    /* --- Ù‡Ø¯Ø± --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: relative;
      user-select: none;
    }
    /* Ù„ÛŒØ¨Ù„ Ø±Ù†Ú¯Ø§Ø±Ù†Ú¯ Ø§Ø±Ø²ÙˆØ¦ÛŒÙ‡ */
    #label-orzooiyeh {
      font-size: 30px;
      font-weight: bold;
      background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rainbow 3s linear infinite;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
    }
    @keyframes rainbow {
      0% { background-position: 0% }
      100% { background-position: 100% }
    }
    /* Ø³Ø§Ø¹Øª Ùˆ ØªØ§Ø±ÛŒØ® Ø³Ù…Øª Ú†Ù¾ */
    #date-time {
      font-size: 14px;
      color: #444;
      white-space: nowrap;
    }
    /* Ø¢ÛŒÚ©ÙˆÙ† Ú©Ø±Ù‡ Ø²Ù…ÛŒÙ† Ø³Ù…Øª Ø±Ø§Ø³Øª */
    #lang-select {
      cursor: pointer;
      font-size: 22px;
      user-select: none;
      position: relative;
    }
    #lang-options {
      position: absolute;
      top: 30px;
      right: 0;
      background: white;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
      display: none;
      z-index: 100;
    }
    #lang-options div {
      padding: 6px 12px;
      cursor: pointer;
      white-space: nowrap;
    }
    #lang-options div:hover {
      background-color: #eee;
    }
    /* --- Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø´Ø±ÙˆØ¹ --- */
    #guide {
      text-align: center;
      font-size: 18px;
      margin: 10px 0 5px 0;
      color: #555;
    }
    /* --- Ø¨Ø®Ø´ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ --- */
    #stack {
      flex: 1;
      max-width: 320px;
      margin: 0 auto;
      position: relative;
      perspective: 1000px;
      user-select: none;
    }
    .card {
      position: absolute;
      width: 300px;
      height: 180px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 12px 20px;
      cursor: pointer;
      transition: transform 0.5s ease, opacity 0.5s ease;
      backface-visibility: hidden;
    }
    .card img {
      width: 110px;
      height: 110px;
      border-radius: 12px;
      object-fit: cover;
      margin-left: 15px;
      flex-shrink: 0;
    }
    .card-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 6px;
    }
    .card-title {
      font-size: 20px;
      font-weight: 700;
      color: #222;
    }
    .card-price {
      font-size: 16px;
      color: #555;
    }
    /* Ú©Ø§Ø±Øª Ø¨ÙˆÙ„Ø¯ ÙˆØ³Ø· */
    .card.active {
      transform: translateY(-20px) scale(1.05);
      box-shadow: 0 12px 24px rgba(0,0,0,0.3);
      z-index: 100;
    }
    /* --- Ø¨Ø®Ø´ Ø¬Ø³ØªØ¬Ùˆ --- */
    footer {
      padding: 12px 20px;
      background: white;
      box-shadow: 0 -2px 6px rgba(0,0,0,0.1);
    }
    #search-input {
      width: 100%;
      padding: 10px 14px;
      font-size: 16px;
      border: 1.5px solid #ccc;
      border-radius: 10px;
      outline: none;
      transition: border-color 0.3s ease;
    }
    #search-input:focus {
      border-color: #2196f3;
    }
    /* ÙÛŒÙ„ØªØ± ØªØ§Ø±ÛŒØ® Ø³Ø§Ø¯Ù‡ */
    #date-filter {
      margin-top: 8px;
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    #date-filter input[type="date"] {
      padding: 6px 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<header>
  <div id="date-time">--/--/--  --:--:--</div>
  <div id="label-orzooiyeh">Ø§Ø±Ø²ÙˆØ¦ÛŒÙ‡</div>
  <div id="lang-select" tabindex="0" aria-haspopup="listbox" aria-expanded="false" aria-label="ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù†">
    ğŸŒ
    <div id="lang-options" role="listbox" aria-label="Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ø¨Ø§Ù†">
      <div role="option" data-lang="fa" tabindex="0">ÙØ§Ø±Ø³ÛŒ</div>
      <div role="option" data-lang="ar" tabindex="0">Ø¹Ø±Ø¨ÛŒ</div>
      <div role="option" data-lang="en" tabindex="0">English</div>
    </div>
  </div>
</header>

<div id="guide">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ØµÙØ­Ù‡ Ø±Ø§ Ù„Ù…Ø³ Ú©Ù†ÛŒØ¯</div>

<main id="stack" aria-live="polite" aria-label="Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª">
  <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
</main>

<footer>
  <input id="search-input" type="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„..." aria-label="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„" />
  <div id="date-filter" aria-label="ÙÛŒÙ„ØªØ± ØªØ§Ø±ÛŒØ®">
    <input type="date" id="date-from" aria-label="ØªØ§Ø±ÛŒØ® Ø§Ø²" />
    <input type="date" id="date-to" aria-label="ØªØ§Ø±ÛŒØ® ØªØ§" />
  </div>
</footer>

<audio id="cardSound" src="https://cdn.pixabay.com/audio/2023/03/16/audio_49ad00c3e4.mp3" preload="auto"></audio>

<script>
  // Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§Ø¹Øª Ùˆ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
  function toPersianDigits(str) {
    const persianDigits = "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹";
    return str.replace(/\d/g, d => persianDigits[d]);
  }

  function updateDateTime() {
    const now = new Date();
    // Ø´Ù…Ø³ÛŒ Ø³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ø§ Intl.DateTimeFormat ÙØ§Ø±Ø³ÛŒ
    const options = { year: 'numeric', month: '2-digit', day: '2-digit', 
                      hour: '2-digit', minute: '2-digit', second: '2-digit' };
    const formatter = new Intl.DateTimeFormat('fa-IR-u-nu-latn', options);
    const parts = formatter.formatToParts(now);
    let dateStr = "", timeStr = "";
    parts.forEach(p => {
      if (p.type === "year" || p.type === "month" || p.type === "day") dateStr += p.value;
      if (p.type === "hour" || p.type === "minute" || p.type === "second") timeStr += p.value;
      if (p.type === "literal") {
        if (timeStr.length === 0) dateStr += p.value;
        else timeStr += p.value;
      }
    });
    dateStr = toPersianDigits(dateStr);
    timeStr = toPersianDigits(timeStr);
    document.getElementById("date-time").textContent = dateStr + "  " + timeStr;
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ø¹Ù†ÙˆØ§Ù†ØŒ ØªØµÙˆÛŒØ±ØŒ ØªØ§Ø±ÛŒØ®)
  const products = [
    { id:1, title: "Ø®Ø±Ù…Ø§ÛŒ Ú©Ø¨Ú©Ø§Ø¨", img: "https://via.placeholder.com/110x110?text=Ø®Ø±Ù…Ø§", date: "2025-07-01", phone: "09120000001" },
    { id:2, title: "Ø¹Ø±Ù‚ Ù†Ø¹Ù†Ø§Ø¹", img: "https://via.placeholder.com/110x110?text=Ø¹Ø±Ù‚+Ù†Ø¹Ù†Ø§Ø¹", date: "2025-07-05", phone: "09120000002" },
    { id:3, title: "Ú©Ø±Ù… Ú¯ÛŒØ§Ù‡ÛŒ", img: "https://via.placeholder.com/110x110?text=Ú©Ø±Ù…", date: "2025-07-03", phone: "09120000003" },
    { id:4, title: "Ù¾Ù†ÛŒØ± Ù…Ø­Ù„ÛŒ", img: "https://via.placeholder.com/110x110?text=Ù¾Ù†ÛŒØ±", date: "2025-07-02", phone: "09120000004" },
    { id:5, title: "Ù‚Ø§Ù„ÛŒ Ø¯Ø³ØªØ¨Ø§Ù", img: "https://via.placeholder.com/110x110?text=Ù‚Ø§Ù„ÛŒ", date: "2025-07-06", phone: "09120000005" },
    { id:6, title: "Ù„Ø¨Ù†ÛŒØ§Øª Ø¨ÙˆÙ…ÛŒ", img: "https://via.placeholder.com/110x110?text=Ù„Ø¨Ù†ÛŒØ§Øª", date: "2025-07-04", phone: "09120000006" },
    { id:7, title: "Ø²ÛŒØªÙˆÙ† Ø·Ø¨ÛŒØ¹ÛŒ", img: "https://via.placeholder.com/110x110?text=Ø²ÛŒØªÙˆÙ†", date: "2025-07-01", phone: "09120000007" },
    { id:8, title: "Ø¹Ø³Ù„ Ø§Ø±Ú¯Ø§Ù†ÛŒÚ©", img: "https://via.placeholder.com/110x110?text=Ø¹Ø³Ù„", date: "2025-07-05", phone: "09120000008" },
    { id:9, title: "Ù†Ø§Ù† Ù…Ø­Ù„ÛŒ", img: "https://via.placeholder.com/110x110?text=Ù†Ø§Ù†", date: "2025-07-03", phone: "09120000009" },
    { id:10, title: "Ú¯Ù„Ø§Ø¨ Ø³Ù†ØªÛŒ", img: "https://via.placeholder.com/110x110?text=Ú¯Ù„Ø§Ø¨", date: "2025-07-02", phone: "09120000010" },
    { id:11, title: "Ú†Ø§ÛŒ Ø¨Ù‡Ø§Ø±Ù‡", img: "https://via.placeholder.com/110x110?text=Ú†Ø§ÛŒ", date: "2025-07-06", phone: "09120000011" }
  ];

  const maxVisibleCards = 10;
  let startIndex = 0;
  let firstTouch = true;

  const stack = document.getElementById("stack");
  const guide = document.getElementById("guide");
  const cardSound = document.getElementById("cardSound");

  // Ø³Ø§Ø®Øª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ùˆ Ú†ÛŒÙ†Ø´ Ø§ÙˆÙ„ÛŒÙ‡
  function renderCards() {
    stack.innerHTML = "";
    // Ù†Ù…Ø§ÛŒØ´ Ø­Ø¯Ø§Ú©Ø«Ø± 10 Ú©Ø§Ø±ØªØŒ Ø¨Ø§Ù‚ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø­Ù„Ù‚Ù‡
    for (let i = 0; i < maxVisibleCards; i++) {
      let idx = (startIndex + i) % products.length;
      const p = products[idx];
      const card = document.createElement("div");
      card.classList.add("card");
      if (i === 0) card.classList.add("active"); // Ú©Ø§Ø±Øª ÙˆØ³Ø· Ø¨ÙˆÙ„Ø¯
      card.style.zIndex = maxVisibleCards - i;
      card.style.top = `${i * 6}px`;
      card.style.left = `${i * 3}px`;
      card.style.transform = `rotate(${(i - 2) * 3}deg)`;
      card.innerHTML =
